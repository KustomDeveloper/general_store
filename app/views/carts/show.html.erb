<h1>Your Cart</h1>

<% if @order_items.any? %>
  <% @order_items.each do |item| %>
    <div class="cart-item">
      <h2><%= item.product.name %></h2>
      <p>Price: <%= number_to_currency(item.product.price) %></p>
      <%= form_with model: item, local: true do |f| %>
        <%= f.label :quantity %>
        <%= f.number_field :quantity, value: item.quantity, min: 1 %>
        <%= f.submit 'Update Quantity' %>
      <% end %>
      <p>Subtotal: <%= number_to_currency(item.total_price) %></p>
      <%= button_to 'Remove', order_item_path(item), method: :delete %>
    </div>
  <% end %>
  <p>Total: <%= number_to_currency(@order.order_items.sum(&:total_price)) %></p>
<% else %>
  <p>Your cart is empty.</p>
<% end %>

<%= link_to 'Continue Shopping', products_path %>